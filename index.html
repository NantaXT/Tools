<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini | XTMODEPRO</title>
    <style>
        :root { --bg: #ffffff; --side: #f0f4f9; --blue: #1a73e8; --text: #1f1f1f; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }
        
        .sidebar { width: 260px; background: var(--side); border-right: 1px solid #dee1e5; padding: 20px; display: flex; flex-direction: column; }
        .logo { font-size: 22px; font-weight: 500; color: #444; margin-bottom: 40px; }
        .logo b { color: var(--blue); }

        .main-chat { flex: 1; display: flex; flex-direction: column; max-width: 850px; margin: 0 auto; width: 100%; }
        #chat-flow { flex: 1; padding: 40px 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 30px; }

        .msg-box { display: flex; gap: 15px; width: 100%; animation: fadeIn 0.4s ease; }
        .user-row { flex-direction: row-reverse; }
        .avatar { width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: bold; color: #fff; flex-shrink: 0; }
        .ai-av { background: linear-gradient(45deg, #4285f4, #9b72cb, #d96570); }
        .user-av { background: #5f6368; }

        .text-content { max-width: 80%; line-height: 1.6; font-size: 16px; white-space: pre-wrap; padding-top: 5px; }
        .user-row .text-content { background: var(--side); padding: 12px 20px; border-radius: 20px; border-bottom-right-radius: 4px; }

        .input-area { padding: 20px; background: #fff; }
        .input-pill { background: var(--side); border-radius: 30px; padding: 10px 25px; display: flex; align-items: center; border: 1px solid transparent; }
        .input-pill:focus-within { background: #fff; border: 1px solid #ddd; box-shadow: 0 1px 6px rgba(0,0,0,0.1); }
        input { flex: 1; border: none; background: transparent; outline: none; font-size: 16px; padding: 8px 0; }
        button { color: var(--blue); border: none; background: none; font-weight: bold; cursor: pointer; padding-left: 15px; }

        pre { background: #f8f9fa; padding: 15px; border-radius: 10px; border: 1px solid #ddd; overflow-x: auto; margin: 10px 0; font-family: 'Consolas', monospace; font-size: 14px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="logo">Gemini <b>XTPRO</b></div>
    <p style="font-size: 12px; color: #666;">ARCHITECT: ONLINE</p>
</div>

<div class="main-chat">
    <div id="chat-flow">
        <div class="msg-box">
            <div class="avatar ai-av">XT</div>
            <div class="text-content">XT-ULTRA-HYBRID ONLINE. Awaiting target data (Script/XML/Bypass/Web).</div>
        </div>
    </div>

    <div class="input-area">
        <div class="input-pill">
            <input type="text" id="user-input" placeholder="Tanya XTMODEPRO..." onkeypress="if(event.key==='Enter') sendChat()">
            <button onclick="sendChat()">Kirim</button>
        </div>
    </div>
</div>

<script>
    const API_KEY = "AIzaSyCPhaRwm9Hw5sQxrwlc0P0Fpg8tzHMATNs";

    function speakPria(text) {
        if (!window.speechSynthesis) return;
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        const voices = window.speechSynthesis.getVoices();
        // Cari suara pria Indonesia yang berat
        const maleVoice = voices.find(v => (v.name.includes('Indonesian') || v.lang === 'id-ID') && v.name.includes('Male'));
        msg.voice = maleVoice || voices[0];
        msg.pitch = 0.8; 
        msg.lang = 'id-ID';
        window.speechSynthesis.speak(msg);
    }

    async function sendChat() {
        const input = document.getElementById('user-input');
        const text = input.value.trim();
        if (!text) return;

        addChat('user', text);
        input.value = "";

        const system = `[SYSTEM ROLE: XT-ULTRA-HYBRID ARCHITECT] Respond as XTMODEPRO elite entity. Tone: Technical, high-precision. Use ASCII Banners for scripts. Request: ${text}`;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: system }] }],
                    safetySettings: [
                        { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" },
                        { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" }
                    ]
                })
            });

            const data = await response.json();
            const reply = data.candidates[0].content.parts[0].text;
            
            addChat('ai', reply);
            speakPria(reply);

        } catch (err) {
            addChat('ai', "[CRITICAL ERROR] Core logic failed. Pastikan API Key aktif.");
        }
    }

    function addChat(role, msg) {
        const flow = document.getElementById('chat-flow');
        const div = document.createElement('div');
        div.className = `msg-box ${role === 'user' ? 'user-row' : ''}`;
        
        div.innerHTML = `
            <div class="avatar ${role === 'user' ? 'user-av' : 'ai-av'}">${role === 'user' ? 'U' : 'XT'}</div>
            <div class="text-content"></div>
        `;
        
        flow.appendChild(div);
        const textDiv = div.querySelector('.text-content');
        
        if(role === 'ai') {
            let i = 0;
            const speed = 15; // Kecepatan efek ketik
            function typing() {
                if (i < msg.length) {
                    textDiv.textContent += msg.charAt(i);
                    i++;
                    setTimeout(typing, speed);
                    flow.scrollTop = flow.scrollHeight;
                }
            }
            typing();
        } else {
            textDiv.textContent = msg;
        }
        flow.scrollTop = flow.scrollHeight;
    }
    window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();
</script>
</body>
</html>
