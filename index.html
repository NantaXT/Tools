<!DOCTYPE html>
<html>
<head>
    <title>TGMODS PURE WEB</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/gramjs/dist/gramjs.min.js"></script>
    <style>
        body { background: #0e1621; color: white; font-family: sans-serif; padding: 20px; }
        .card { background: #17212b; padding: 20px; border-radius: 12px; border: 1px solid #31a2f2; }
        input { width: 100%; padding: 12px; margin: 10px 0; background: #242f3d; color: white; border: 1px solid #31a2f2; box-sizing: border-box; }
        button { background: #31a2f2; color: white; border: none; padding: 12px; width: 100%; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div id="login-form" class="card">
        <h2>ðŸ”¥ TGMODS CLOUD</h2>
        <input type="text" id="api_id" placeholder="API ID (Cek di my.telegram.org)">
        <input type="text" id="api_hash" placeholder="API HASH">
        <input type="text" id="phone" placeholder="+628xxx">
        <button onclick="startLogin()">MASUK KE CLOUD</button>
        
        <div id="otp-area" style="display:none">
            <input type="text" id="code" placeholder="Kode OTP">
            <button onclick="finishLogin()">KONFIRMASI</button>
        </div>
    </div>

    <div id="chat-area" class="card" style="display:none">
        <h3>âœ… Berhasil Masuk!</h3>
        <p>Sekarang situs ini terhubung langsung ke Telegram tanpa Termux.</p>
        <div id="list-chats"></div>
    </div>

    <script>
        let client;
        let phoneCodeHash;

        async function startLogin() {
            const apiId = parseInt(document.getElementById('api_id').value);
            const apiHash = document.getElementById('api_hash').value;
            const phoneNumber = document.getElementById('phone').value;

            client = new window.gramjs.TelegramClient(new window.gramjs.sessions.StringSession(""), apiId, apiHash, {
                connectionRetries: 5,
            });

            await client.connect();
            const result = await client.sendCode({ apiId, apiHash }, phoneNumber);
            phoneCodeHash = result.phoneCodeHash;
            
            document.getElementById('otp-area').style.display = 'block';
            alert("OTP Terkirim ke Aplikasi Telegram Anda!");
        }

        async function finishLogin() {
            const code = document.getElementById('code').value;
            const phoneNumber = document.getElementById('phone').value;
            
            await client.signInUser({ apiId: parseInt(document.getElementById('api_id').value), apiHash: document.getElementById('api_hash').value }, {
                phoneNumber: phoneNumber,
                phoneCodeHash: phoneCodeHash,
                phoneCode: code,
            });

            document.getElementById('login-form').style.display = 'none';
            document.getElementById('chat-area').style.display = 'block';
            alert("Login Berhasil Tanpa Termux!");
        }
    </script>
</body>
</html>
